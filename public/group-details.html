<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Group Management | Orlando 2026</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Group travel management" name="description" />
    <meta content="Bruno Pinto Brum" name="author" />
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <link href="assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" />
    <link href="assets/css/icons.min.css" rel="stylesheet" />
    <link href="assets/css/app.min.css" id="app-style" rel="stylesheet" />
    <style>
        /* Mobile-responsive tables */
        @media screen and (max-width: 767px) {
            /* Hide table headers */
            table.table-mobile-cards thead {
                position: absolute !important;
                top: -9999px !important;
                left: -9999px !important;
            }

            /* Force table elements to block */
            table.table-mobile-cards,
            table.table-mobile-cards tbody,
            table.table-mobile-cards tr,
            table.table-mobile-cards td {
                display: block !important;
            }

            /* Remove default table spacing */
            table.table-mobile-cards {
                border: 0 !important;
            }

            /* Style each row as a card */
            table.table-mobile-cards tr {
                margin-bottom: 1rem !important;
                border: 1px solid #dee2e6 !important;
                border-radius: 0.25rem !important;
                padding: 0.75rem !important;
                background-color: #fff !important;
            }

            /* Style cells with labels */
            table.table-mobile-cards td {
                border: none !important;
                padding: 0.5rem 0 !important;
                position: relative !important;
                padding-left: 50% !important;
                text-align: left !important;
            }

            /* Add label before each cell */
            table.table-mobile-cards td:before {
                content: attr(data-label);
                position: absolute !important;
                left: 0 !important;
                width: 45% !important;
                padding-right: 10px !important;
                white-space: nowrap !important;
                font-weight: 600 !important;
                text-align: left !important;
            }

            /* Action buttons cell */
            table.table-mobile-cards td:last-child {
                padding-left: 0 !important;
                padding-top: 0.75rem !important;
                border-top: 1px solid #dee2e6 !important;
                margin-top: 0.5rem !important;
                text-align: right !important;
            }

            table.table-mobile-cards td:last-child:before {
                content: none !important;
            }
        }
    </style>
</head>
<body data-layout-mode="light" data-topbar="light" data-sidebar="dark">
    <div id="layout-wrapper">
        <header id="page-topbar">
            <div class="navbar-header">
                <div class="d-flex">
                    <div class="navbar-brand-box">
                        <a href="/groups" class="logo logo-dark">
                            <span class="logo-sm">
                                <img src="/assets/images/logo.svg" alt="" height="22">
                            </span>
                            <span class="logo-lg">
                                <img src="/assets/images/logo-dark.png" alt="" height="17">
                            </span>
                        </a>

                        <a href="/groups" class="logo logo-light">
                            <span class="logo-sm">
                                <img src="/assets/images/logo-light.svg" alt="" height="22">
                            </span>
                            <span class="logo-lg">
                                <img src="/assets/images/logo-light.png" alt="" height="36">
                            </span>
                        </a>
                    </div>

                    <button type="button" class="btn btn-sm px-3 font-size-16 header-item waves-effect" id="vertical-menu-btn">
                        <i class="fa fa-fw fa-bars"></i>
                    </button>

                    <div class="dropdown dropdown-mega d-none d-lg-block ms-2">
                        <button type="button" class="btn header-item waves-effect" data-bs-toggle="dropdown" aria-haspopup="false" aria-expanded="false">
                            <span>Group Actions</span>
                            <i class="mdi mdi-chevron-down"></i>
                        </button>
                        <div class="dropdown-menu dropdown-megamenu">
                            <div class="row">
                                <div class="col-sm-8">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <h5 class="font-size-14">Dashboard</h5>
                                            <ul class="list-unstyled megamenu-list">
                                                <li><a href="/dashboard#dashboard">Summary</a></li>
                                                <li><a href="/dashboard#balances">Balances</a></li>
                                                <li><a href="/dashboard#debts">Who owes</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-4">
                                            <h5 class="font-size-14">People</h5>
                                            <ul class="list-unstyled megamenu-list">
                                                <li><a href="#participants">Families</a></li>
                                                <li><a href="#participants">Participants</a></li>
                                                <li><a href="#members">Members</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-4">
                                            <h5 class="font-size-14">Expenses</h5>
                                            <ul class="list-unstyled megamenu-list">
                                                <li><a href="#expenses">Add expense</a></li>
                                                <li><a href="#expenses">Split preview</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-4 mt-3">
                                            <h5 class="font-size-14">Logistics</h5>
                                            <ul class="list-unstyled megamenu-list">
                                                <li><a href="#flights"><i class="bx bx-plane me-1"></i>Flights</a></li>
                                                <li><a href="#lodgings">Lodgings</a></li>
                                                <li><a href="#transports">Transports</a></li>
                                                <li><a href="#tickets"><i class="bx bx-ticket me-1"></i>Tickets</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <h5 class="font-size-14">Shortcuts</h5>
                                            <ul class="list-unstyled megamenu-list">
                                                <li><a href="/groups">My groups</a></li>
                                                <li id="leaveGroupItem" hidden><a href="#" id="leaveGroupLink" class="text-danger">Leave group</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-sm-5">
                                            <div>
                                                <img src="/assets/images/megamenu-img.png" alt="" class="img-fluid mx-auto d-block">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="d-flex">
                    <div class="dropdown d-inline-block">
                        <button type="button" class="btn header-item waves-effect" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="rounded-circle header-profile-user" id="userAvatar" src="/assets/images/users/default-avatar.svg" alt="Header Avatar" data-fallback-src="/assets/images/users/default-avatar.svg">
                            <span class="d-none d-xl-inline-block ms-1" id="userDisplayName">Account</span>
                            <i class="mdi mdi-chevron-down d-none d-xl-inline-block"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end">
                            <div class="dropdown-item-text">
                                <h6 class="mb-0" id="dropdownUserName">Account</h6>
                                <small class="text-muted" id="dropdownUserEmail">email@example.com</small>
                            </div>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="/groups"><i class="bx bx-group font-size-16 align-middle me-1"></i> My groups</a>
                            <a class="dropdown-item" href="javascript:void(0);" id="changeAvatarLink"><i class="bx bx-camera font-size-16 align-middle me-1"></i> Change photo</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="javascript:void(0);" id="logoutLink">
                                <i class="bx bx-power-off font-size-16 align-middle me-1 text-danger"></i> Logout
                            </a>
                        </div>
                    </div>

                    <div class="dropdown d-inline-block">
                        <button type="button" class="btn header-item noti-icon right-bar-toggle waves-effect">
                            <i class="bx bx-cog bx-spin"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="vertical-menu">
            <div data-simplebar class="h-100">
                <div id="sidebar-menu">
                    <ul class="metismenu list-unstyled" id="side-menu">
                        <li class="menu-title">Groups</li>
                        <li><a href="/groups" class="waves-effect"><i class="bx bx-group"></i><span>My groups</span></a></li>
                        <li><a href="/dashboard" class="waves-effect"><i class="bx bx-bar-chart-alt-2"></i><span>Dashboard</span></a></li>
                        <li><a href="#participants" class="waves-effect"><i class="bx bx-user-circle"></i><span>Participants</span></a></li>
                        <li><a href="#members" class="waves-effect"><i class="bx bx-user-check"></i><span>Members</span></a></li>
                        <li><a href="#expenses" class="waves-effect"><i class="bx bx-wallet"></i><span>Expenses</span></a></li>
                        <li><a href="#flights" class="waves-effect"><i class="mdi mdi-airplane"></i><span>Flights</span></a></li>
                        <li><a href="#lodgings" class="waves-effect"><i class="bx bx-home-alt"></i><span>Lodgings</span></a></li>
                        <li><a href="#transports" class="waves-effect"><i class="bx bx-bus"></i><span>Transports</span></a></li>
                        <li><a href="#tickets" class="waves-effect"><i class="mdi mdi-ticket"></i><span>Tickets</span></a></li>
                        <li><a href="#debts" class="waves-effect"><i class="bx bx-transfer"></i><span>Who owes</span></a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="page-content">
                <div class="container-fluid py-4">
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box d-flex align-items-center justify-content-between">
                                <h4 class="mb-0 font-size-18" id="pageTitle">Group management</h4>
                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="javascript:void(0);">Groups</a></li>
                                        <li class="breadcrumb-item active" id="breadcrumbActive">Management</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" id="dashboard">
                        <div class="card-body">
                            <div class="d-flex flex-wrap align-items-center justify-content-between">
                                <div>
                                    <span class="badge bg-soft-primary text-primary" id="groupRoleBadge">Member</span>
                                    <h4 class="mb-1" id="groupName">Group name</h4>
                                    <p class="text-muted mb-0">Default currency: <span id="groupCurrency">USD</span></p>
                                </div>
                                <div class="d-flex flex-wrap align-items-end gap-3 mt-3 mt-md-0">
                                    <div>
                                        <label class="form-label mb-0" for="groupSelector">Switch group</label>
                                        <select class="form-select" id="groupSelector" style="min-width: 200px;"></select>
                                    </div>
                                    <div>
                                        <label class="form-label mb-0" for="familyBalanceMode">Family balance mode</label>
                                        <select class="form-select" id="familyBalanceMode" style="min-width: 220px;">
                                            <option value="">Select a balance mode</option>
                                            <option value="participants">By participants</option>
                                            <option value="families">By families</option>
                                        </select>
                                        <small class="text-danger d-none" id="familyBalanceModeError"></small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row g-4" id="summaryCards">
                        <div class="col-lg-3">
                            <div class="card">
                                <div class="card-body">
                                    <p class="text-muted mb-1">Total spend</p>
                                    <h4 class="mb-0" id="summaryTotal">--</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="card">
                                <div class="card-body">
                                    <p class="text-muted mb-1">Participants</p>
                                    <h4 class="mb-0" id="summaryParticipants">--</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="card">
                                <div class="card-body">
                                    <p class="text-muted mb-1">Families</p>
                                    <h4 class="mb-0" id="summaryFamilies">--</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="card">
                                <div class="card-body">
                                    <p class="text-muted mb-1">Debts</p>
                                    <h4 class="mb-0" id="summaryDebts">--</h4>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row g-4 mt-1" id="balances">
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Participant balances</h5>
                                    <div class="table-responsive">
                                        <table class="table table-sm align-middle mb-0">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>Participant</th>
                                                    <th class="text-end">Balance</th>
                                                </tr>
                                            </thead>
                                            <tbody id="participantBalances">
                                                <tr><td colspan="2" class="text-muted text-center">No data.</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Family balances</h5>
                                    <div class="table-responsive">
                                        <table class="table table-sm align-middle mb-0">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>Family</th>
                                                    <th class="text-end">Balance</th>
                                                </tr>
                                            </thead>
                                            <tbody id="familyBalances">
                                                <tr><td colspan="2" class="text-muted text-center">No data.</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-4" id="debts">
                        <div class="card-body">
                            <h5 class="card-title">Who owes who</h5>
                            <ul class="list-group list-group-flush" id="debtList">
                                <li class="list-group-item text-muted text-center">No debts yet.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="row g-4 mt-1" id="participants">
                        <div class="col-lg-5">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Families</h5>
                                    <form id="familyForm" class="mb-3 needs-validation" novalidate>
                                        <div class="input-group">
                                            <input class="form-control" id="familyName" placeholder="Family name" maxlength="80" required>
                                            <button class="btn btn-outline-secondary d-none" type="button" id="familyCancel">Cancel</button>
                                            <button class="btn btn-outline-primary" type="submit" id="familySubmit">Add</button>
                                        </div>
                                        <div class="invalid-feedback">Enter a family name.</div>
                                    </form>
                                    <div class="alert alert-warning d-none" id="familyReadOnly">
                                        You have read-only access in this group.
                                    </div>
                                    <div class="alert alert-danger d-none" id="familyError"></div>
                                    <ul class="list-group" id="familyList">
                                        <li class="list-group-item text-muted text-center">No families yet.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">Participants</h5>
                                    <form id="participantForm" class="row g-2 mb-3 needs-validation" novalidate>
                                        <div class="col-md-5">
                                            <input class="form-control" id="participantName" placeholder="Participant name" maxlength="80" required>
                                            <div class="invalid-feedback">Enter a participant name.</div>
                                        </div>
                                        <div class="col-md-3">
                                            <select class="form-select" id="participantType">
                                                <option value="">Select a type</option>
                                                <option value="adult">Adult</option>
                                                <option value="child">Child</option>
                                                <option value="infant">Infant</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <select class="form-select" id="participantFamily">
                                                <option value="">Select a family (optional)</option>
                                            </select>
                                        </div>
                                        <div class="col-md-12 d-flex justify-content-end">
                                            <button class="btn btn-outline-secondary d-none me-2" type="button" id="participantCancel">Cancel</button>
                                            <button class="btn btn-outline-primary" type="submit" id="participantSubmit">Add participant</button>
                                        </div>
                                    </form>
                                    <div class="alert alert-warning d-none" id="participantReadOnly">
                                        You have read-only access in this group.
                                    </div>
                                    <div class="alert alert-danger d-none" id="participantError"></div>
                                    <div class="table-responsive">
                                        <table class="table table-sm align-middle mb-0 table-mobile-cards">
                                            <thead class="table-light">
                                                <tr>
                                                    <th class="sortable" data-sort="displayName" style="cursor:pointer">Name <span class="sort-icon"></span></th>
                                                    <th class="sortable" data-sort="familyId" style="cursor:pointer">Family <span class="sort-icon"></span></th>
                                                    <th class="sortable" data-sort="type" style="cursor:pointer">Type <span class="sort-icon"></span></th>
                                                    <th class="text-end">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody id="participantList">
                                                <tr><td colspan="4" class="text-muted text-center">No participants yet.</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-4" id="members">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-between mb-3">
                                <h5 class="card-title mb-0">Group members</h5>
                                <button class="btn btn-sm btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#inviteCollapse" aria-expanded="false" aria-controls="inviteCollapse" id="inviteMemberBtn">
                                    <i class="bx bx-user-plus me-1"></i> Invite member
                                </button>
                            </div>

                            <div class="collapse mb-4" id="inviteCollapse">
                                <div class="card card-body bg-light border-0">
                                    <div class="d-flex align-items-center justify-content-between mb-3">
                                        <h6 class="mb-0">Send invite</h6>
                                        <span class="badge bg-soft-info text-info">Owner only</span>
                                    </div>
                                    <form id="inviteForm" class="row g-3 needs-validation" novalidate>
                                        <div class="col-md-5">
                                            <label class="form-label" for="inviteEmail">Email</label>
                                            <input class="form-control" id="inviteEmail" type="email" placeholder="name@email.com" required>
                                            <div class="invalid-feedback">Enter a valid email.</div>
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label" for="inviteRole">Role</label>
                                            <select class="form-select" id="inviteRole" required>
                                                <option value="">Select a role</option>
                                                <option value="member">Member</option>
                                                <option value="viewer">Viewer</option>
                                            </select>
                                            <div class="invalid-feedback">Select a role.</div>
                                        </div>
                                        <div class="col-md-4 d-flex align-items-end justify-content-end">
                                            <button class="btn btn-primary" type="submit">Send invite</button>
                                        </div>
                                    </form>
                                    <div class="alert alert-warning d-none mt-3" id="inviteReadOnly">
                                        You have read-only access in this group.
                                    </div>
                                    <div class="alert alert-danger d-none mt-3" id="inviteError"></div>
                                    <div class="alert alert-success d-none mt-3" id="inviteSuccess">
                                        <div class="fw-semibold" id="inviteSuccessTitle">Invite sent!</div>
                                        <div class="small text-muted" id="inviteSuccessMessage">An email has been sent to the invited member.</div>
                                        <div class="mt-3 pt-3 border-top">
                                            <div class="small text-muted mb-1"><i class="bx bx-link me-1"></i> Backup link (if email doesn't arrive):</div>
                                            <div class="input-group input-group-sm">
                                                <input type="text" class="form-control form-control-sm font-monospace" id="inviteLinkInput" readonly>
                                                <button class="btn btn-outline-secondary" type="button" id="copyInviteLink" title="Copy link">
                                                    <i class="bx bx-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mt-2 text-muted small" id="inviteExpires"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="table-responsive">
                                <table class="table align-middle table-nowrap">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Member</th>
                                            <th style="width: 180px;">Role</th>
                                            <th class="text-end" style="width: 140px;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="memberList"></tbody>
                                </table>
                            </div>
                            <div class="alert alert-warning d-none mt-3" id="membersReadOnly">
                                You have read-only access in this group.
                            </div>
                            <div class="alert alert-danger d-none mt-3" id="membersError"></div>
                        </div>
                    </div>

                    <div class="card mt-4" id="expenses">
                        <div class="card-body">
                            <div class="alert alert-info d-flex align-items-start" role="alert">
                                <i class="mdi mdi-information-outline me-2"></i>
                                <div>
                                    This is the MVP financial hub. Track who paid and how the split works here.
                                </div>
                            </div>
                            <div class="modal fade" id="expenseModal" tabindex="-1" aria-labelledby="expenseModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-xl modal-dialog-scrollable modal-fullscreen-sm-down">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="expenseModalLabel">Add expense</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <form id="expenseForm" class="row g-3 needs-validation" novalidate>
                                <div class="col-md-4">
                                    <label class="form-label" for="expenseDescription">Description</label>
                                    <input class="form-control" id="expenseDescription" maxlength="140" required>
                                    <div class="invalid-feedback">Enter a description.</div>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="expenseAmount">Amount</label>
                                    <input class="form-control" id="expenseAmount" type="number" step="0.01" min="0.01" required>
                                    <div class="invalid-feedback">Enter a valid amount.</div>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="expenseCurrency">Currency</label>
                                    <select class="form-select" id="expenseCurrency" required>
                                        <option value="">Select a currency</option>
                                        <option value="USD">USD</option>
                                        <option value="CAD">CAD</option>
                                        <option value="BRL">BRL</option>
                                    </select>
                                    <div class="invalid-feedback">Select a currency.</div>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="expenseDate">Date</label>
                                    <input class="form-control" id="expenseDate" type="date" required>
                                    <div class="invalid-feedback">Select a date.</div>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="expenseCategory">Category</label>
                                    <input class="form-control" id="expenseCategory" placeholder="Lodging">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label" for="expensePayer">Paid by</label>
                                    <select class="form-select" id="expensePayer" required></select>
                                    <div class="invalid-feedback">Select a payer.</div>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Split type</label>
                                    <div class="d-flex gap-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="splitType" id="splitParticipants" value="participants" checked>
                                            <label class="form-check-label" for="splitParticipants">By participants</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="splitType" id="splitFamilies" value="families">
                                            <label class="form-check-label" for="splitFamilies">By families</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Split mode</label>
                                    <div class="d-flex gap-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="splitMode" id="splitModeEqual" value="equal" checked>
                                            <label class="form-check-label" for="splitModeEqual">Equal</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="splitMode" id="splitModeManual" value="manual">
                                            <label class="form-check-label" for="splitModeManual">Manual</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Split targets</label>
                                    <div class="border rounded p-2" id="splitTargets">
                                        <div class="text-muted">Select participants or families.</div>
                                    </div>
                                    <div class="text-muted small mt-2" id="splitSummary"></div>
                                    <div class="invalid-feedback d-block d-none" id="splitTargetsError">Select at least one target.</div>
                                </div>
                                  <div class="col-md-12 d-none">
                                      <button class="btn btn-outline-secondary d-none me-2" type="button" id="expenseCancel">Cancel</button>
                                      <button class="btn btn-primary" type="submit">Add expense</button>
                                  </div>
                              </form>
                            <div class="alert alert-warning d-none mt-3" id="expenseReadOnly">
                                You have read-only access in this group.
                            </div>
                            <div class="alert alert-info d-none mt-3" id="expenseHint">
                                Add at least one participant to log expenses.
                            </div>
                            <div class="alert alert-danger d-none mt-3" id="expenseError"></div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                                            <button class="btn btn-primary" type="submit" form="expenseForm" id="expenseSubmit">Add expense</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                              <div class="d-flex justify-content-end mt-4">
                                  <button class="btn btn-primary" type="button" id="openExpenseModal" data-bs-toggle="modal" data-bs-target="#expenseModal">
                                      Add expense
                                  </button>
                              </div>
                              <div class="table-responsive mt-3">
                                <table class="table align-middle table-nowrap mb-0 table-mobile-cards">
                                    <thead class="table-light">
                                        <tr>
                                            <th class="sortable" data-sort="description" style="cursor:pointer">Description <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="amount" style="cursor:pointer">Amount <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="date" style="cursor:pointer">Date <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="payerParticipantId" style="cursor:pointer">Paid by <span class="sort-icon"></span></th>
                                            <th>Split</th>
                                            <th class="text-end">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="expenseList">
                                        <tr><td colspan="6" class="text-muted text-center">No expenses yet.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-4" id="flights">
                        <div class="card-body">
                            <div class="alert alert-info d-flex align-items-start" role="alert">
                                <i class="mdi mdi-information-outline me-2"></i>
                                <div>
                                    MVP note: flights are logistical only. To record payments and splits, add an
                                    <a class="alert-link" href="#expenses">expense</a>.
                                </div>
                            </div>
                            <div class="modal fade" id="flightModal" tabindex="-1" aria-labelledby="flightModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-xl modal-dialog-scrollable modal-fullscreen-sm-down">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="flightModalLabel">Add flight</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <form id="flightForm" class="row g-3 needs-validation" novalidate>
                                <div class="col-12">
                                    <h6 class="text-uppercase text-muted mb-0">Flight details</h6>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label" for="flightAirline">Airline</label>
                                    <input class="form-control" id="flightAirline" required list="flightAirlineList">
                                    <datalist id="flightAirlineList"></datalist>
                                    <input type="hidden" id="flightAirlineId">
                                    <div class="invalid-feedback">Enter an airline.</div>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label" for="flightNumber">Flight number</label>
                                    <input class="form-control" id="flightNumber" required>
                                    <div class="invalid-feedback">Enter a flight number.</div>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label" for="flightPnr">PNR</label>
                                    <input class="form-control" id="flightPnr">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label" for="flightStatus">Status</label>
                                    <select class="form-select" id="flightStatus" required>
                                        <option value="">Select a status</option>
                                        <option value="planned">Planned</option>
                                        <option value="paid">Paid</option>
                                        <option value="due">Due</option>
                                    </select>
                                    <div class="invalid-feedback">Select a status.</div>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label" for="flightClass">Class</label>
                                    <select class="form-select" id="flightClass">
                                        <option value="">Select a class</option>
                                        <option value="economy">Economy</option>
                                        <option value="premium_economy">Premium economy</option>
                                        <option value="business">Business</option>
                                        <option value="first">First</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label" for="flightCost">Cost</label>
                                    <input class="form-control" id="flightCost" type="number" step="0.01" min="0.01" required>
                                    <div class="invalid-feedback">Enter a valid cost.</div>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label" for="flightCurrency">Currency</label>
                                    <select class="form-select" id="flightCurrency" required>
                                        <option value="">Select a currency</option>
                                        <option value="USD">USD</option>
                                        <option value="CAD">CAD</option>
                                        <option value="BRL">BRL</option>
                                    </select>
                                    <div class="invalid-feedback">Select a currency.</div>
                                </div>
                                <div class="col-12 mt-2">
                                    <h6 class="text-uppercase text-muted mb-0">Route & timing</h6>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label" for="flightFrom">From</label>
                                    <input class="form-control" id="flightFrom" required list="flightFromList" placeholder="City or airport code">
                                    <datalist id="flightFromList"></datalist>
                                    <input type="hidden" id="flightFromAirportId">
                                    <div class="invalid-feedback">Enter a departure city.</div>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label" for="flightTo">To</label>
                                    <input class="form-control" id="flightTo" required list="flightToList" placeholder="City or airport code">
                                    <datalist id="flightToList"></datalist>
                                    <input type="hidden" id="flightToAirportId">
                                    <div class="invalid-feedback">Enter an arrival city.</div>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label" for="flightDepart">Departure</label>
                                    <input class="form-control" id="flightDepart" type="datetime-local" required>
                                    <div class="invalid-feedback">Select a departure time.</div>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label" for="flightArrive">Arrival</label>
                                    <input class="form-control" id="flightArrive" type="datetime-local" required>
                                    <div class="invalid-feedback">Select an arrival time.</div>
                                </div>
                                <div class="col-12 mt-2">
                                    <h6 class="text-uppercase text-muted mb-0">Passengers</h6>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label" for="flightParticipants">Passengers</label>
                                    <input class="form-control mb-2" id="flightParticipantSearch" type="search" placeholder="Search participants">
                                    <select class="form-select" id="flightParticipants" multiple>
                                    </select>
                                    <small class="text-muted">Select passengers (Ctrl/Cmd for multiple).</small>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Passenger details</label>
                                    <div class="table-responsive border rounded bg-light">
                                        <table class="table table-sm align-middle mb-0">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>Passenger</th>
                                                    <th>Seat</th>
                                                    <th>Baggage</th>
                                                </tr>
                                            </thead>
                                            <tbody id="flightPassengerDetails">
                                                <tr>
                                                    <td colspan="3" class="text-muted">
                                                        Select passengers to assign seats and baggage.
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <small class="text-muted">Optional: assign seats and baggage per passenger.</small>
                                </div>
                                <div class="col-12">
                                    <label class="form-label" for="flightNotes">Notes</label>
                                    <textarea class="form-control" id="flightNotes" rows="2"></textarea>
                                </div>
                                <div class="col-12">
                                    <div class="border rounded p-3 bg-light">
                                        <div class="form-check form-switch mb-2">
                                            <input class="form-check-input" type="checkbox" id="flightLinkExpense">
                                            <label class="form-check-label" for="flightLinkExpense">Link an expense (optional)</label>
                                        </div>
                                        <div class="row g-3 d-none" id="flightExpenseFields">
                                            <div class="col-md-4">
                                                <label class="form-label" for="flightExpensePayer">Payer</label>
                                                <select class="form-select" id="flightExpensePayer">
                                                    <option value="">Select payer</option>
                                                </select>
                                            </div>
                                            <div class="col-md-8 d-flex align-items-end">
                                                <small class="text-muted">Split is equal across all participants for now.</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                  <div class="col-md-12 d-none">
                                      <button class="btn btn-outline-secondary d-none" type="button" id="flightCancel">Cancel</button>
                                      <button class="btn btn-primary" type="submit">Add flight</button>
                                  </div>
                                            </form>
                                            <div class="alert alert-warning d-none mt-3" id="flightReadOnly">
                                                You have read-only access in this group.
                                            </div>
                                            <div class="alert alert-danger d-none mt-3" id="flightError"></div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                                            <button class="btn btn-primary" type="submit" form="flightForm" id="flightSubmit">Add flight</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-end mt-4">
                                <button class="btn btn-primary" type="button" id="openFlightModal" data-bs-toggle="modal" data-bs-target="#flightModal">
                                    Add flight
                                </button>
                            </div>
                            <div class="row g-2 mt-3 align-items-end" id="flightFilters">
                                <div class="col-md-3">
                                    <label class="form-label form-label-sm mb-1" for="filterFlightAirline">Airline</label>
                                    <input type="text" class="form-control form-control-sm" id="filterFlightAirline" placeholder="Filter by airline...">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm mb-1" for="filterFlightFrom">From</label>
                                    <input type="text" class="form-control form-control-sm" id="filterFlightFrom" placeholder="Filter...">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm mb-1" for="filterFlightTo">To</label>
                                    <input type="text" class="form-control form-control-sm" id="filterFlightTo" placeholder="Filter...">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm mb-1" for="filterFlightStatus">Status</label>
                                    <select class="form-select form-select-sm" id="filterFlightStatus">
                                        <option value="">All</option>
                                        <option value="planned">Planned</option>
                                        <option value="paid">Paid</option>
                                        <option value="due">Due</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="clearFlightFilters">Clear filters</button>
                                </div>
                            </div>
                            <div class="table-responsive mt-3">
                                <table class="table align-middle table-nowrap mb-0 table-mobile-cards">
                                    <thead class="table-light">
                                            <tr>
                                                <th class="sortable" data-sort="airline" style="cursor:pointer">Flight <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="from" style="cursor:pointer">Route <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="departAt" style="cursor:pointer">Departure <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="arriveAt" style="cursor:pointer">Arrival <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="participantIds" style="cursor:pointer">Pax <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="status" style="cursor:pointer">Status <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="cost" style="cursor:pointer">Cost <span class="sort-icon"></span></th>
                                                <th class="text-end">Action</th>
                                            </tr>
                                      </thead>
                                      <tbody id="flightList">
                                          <tr><td colspan="8" class="text-muted text-center">No flights yet.</td></tr>
                                      </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-4" id="lodgings">
                        <div class="card-body">
                            <div class="alert alert-info d-flex align-items-start" role="alert">
                                <i class="mdi mdi-information-outline me-2"></i>
                                <div>
                                    MVP note: lodgings are logistical only. To record payments and splits, add an
                                    <a class="alert-link" href="#expenses">expense</a>.
                                </div>
                            </div>
                            <div class="modal fade" id="lodgingModal" tabindex="-1" aria-labelledby="lodgingModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-sm-down" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="lodgingModalLabel">Add lodging</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <form id="lodgingForm" class="row g-3 needs-validation" novalidate>
                                                <div class="col-12">
                                                    <h6 class="text-uppercase text-muted mb-0">Location</h6>
                                                    <hr class="mt-2 mb-0">
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="form-label" for="lodgingName">Property</label>
                                                    <input class="form-control" id="lodgingName" list="lodgingPropertyList" required>
                                                    <datalist id="lodgingPropertyList"></datalist>
                                                    <div class="invalid-feedback">Enter a property name.</div>
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="form-label" for="lodgingAddress">Address line 1</label>
                                                    <input class="form-control" id="lodgingAddress" required>
                                                    <div class="invalid-feedback">Enter an address.</div>
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="form-label" for="lodgingAddressLine2">Address line 2</label>
                                                    <input class="form-control" id="lodgingAddressLine2">
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingCountry">Country</label>
                                                    <select class="form-select" id="lodgingCountry" required>
                                                        <option value="">Select a country</option>
                                                    </select>
                                                    <div class="invalid-feedback">Select a country.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingCity">City</label>
                                                    <input class="form-control" id="lodgingCity" list="lodgingCityList" required>
                                                    <datalist id="lodgingCityList"></datalist>
                                                    <div class="invalid-feedback">Enter a city.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingState">State/Province</label>
                                                    <input class="form-control" id="lodgingState" list="lodgingStateList">
                                                    <datalist id="lodgingStateList"></datalist>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingPostalCode">Postal code</label>
                                                    <input class="form-control" id="lodgingPostalCode">
                                                </div>
                                                <div class="col-12">
                                                    <h6 class="text-uppercase text-muted mb-0">Dates &amp; Status</h6>
                                                    <hr class="mt-2 mb-0">
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingCheckIn">Check-in date</label>
                                                    <input class="form-control" id="lodgingCheckIn" type="date" required>
                                                    <div class="invalid-feedback">Select a check-in date.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingCheckInTime">Check-in time</label>
                                                    <input class="form-control" id="lodgingCheckInTime" type="time" required>
                                                    <div class="invalid-feedback">Select a check-in time.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingCheckOut">Check-out date</label>
                                                    <input class="form-control" id="lodgingCheckOut" type="date" required>
                                                    <div class="invalid-feedback">Select a check-out date.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingCheckOutTime">Check-out time</label>
                                                    <input class="form-control" id="lodgingCheckOutTime" type="time" required>
                                                    <div class="invalid-feedback">Select a check-out time.</div>
                                                </div>
                                                <div class="col-md-2">
                                                    <label class="form-label" for="lodgingStatus">Status</label>
                                                    <select class="form-select" id="lodgingStatus" required>
                                                        <option value="">Select a status</option>
                                                        <option value="planned">Planned</option>
                                                        <option value="paid">Paid</option>
                                                        <option value="due">Due</option>
                                                    </select>
                                                    <div class="invalid-feedback">Select a status.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="lodgingCost">Total cost</label>
                                                    <input class="form-control" id="lodgingCost" type="number" step="0.01" min="0.01" required>
                                                    <div class="invalid-feedback">Enter a valid cost.</div>
                                                </div>
                                                <div class="col-md-2">
                                                    <label class="form-label" for="lodgingCurrency">Currency</label>
                                                    <select class="form-select" id="lodgingCurrency" required>
                                                        <option value="">Select a currency</option>
                                                        <option value="USD">USD</option>
                                                        <option value="CAD">CAD</option>
                                                        <option value="BRL">BRL</option>
                                                    </select>
                                                    <div class="invalid-feedback">Select a currency.</div>
                                                </div>
                                                <div class="col-12">
                                                    <h6 class="text-uppercase text-muted mb-0">Rooms</h6>
                                                    <hr class="mt-2 mb-0">
                                                </div>
                                                <div class="col-md-5">
                                                    <label class="form-label" for="lodgingRoomType">Room type</label>
                                                    <input class="form-control" id="lodgingRoomType" required>
                                                    <div class="invalid-feedback">Enter a room type.</div>
                                                </div>
                                                <div class="col-md-2">
                                                    <label class="form-label" for="lodgingRoomQuantity">Room quantity</label>
                                                    <input class="form-control" id="lodgingRoomQuantity" type="number" min="1" step="1" required>
                                                    <div class="invalid-feedback">Enter a quantity.</div>
                                                </div>
                                                <div class="col-md-2">
                                                    <label class="form-label" for="lodgingRoomOccupancy">Room occupancy</label>
                                                    <input class="form-control" id="lodgingRoomOccupancy" type="number" min="1" step="1" required>
                                                    <div class="invalid-feedback">Enter an occupancy.</div>
                                                </div>
                                                <div class="col-12">
                                                    <h6 class="text-uppercase text-muted mb-0">Contact</h6>
                                                    <hr class="mt-2 mb-0">
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="form-label" for="lodgingHost">Host</label>
                                                    <input class="form-control" id="lodgingHost">
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="form-label" for="lodgingContact">Contact name</label>
                                                    <input class="form-control" id="lodgingContact" required>
                                                    <div class="invalid-feedback">Enter a contact name.</div>
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="form-label" for="lodgingContactPhone">Contact phone</label>
                                                    <input class="form-control" id="lodgingContactPhone">
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="form-label" for="lodgingContactEmail">Contact email</label>
                                                    <input class="form-control" id="lodgingContactEmail" type="email">
                                                </div>
                                                <div class="col-md-12">
                                                    <label class="form-label" for="lodgingNotes">Notes</label>
                                                    <textarea class="form-control" id="lodgingNotes" rows="2"></textarea>
                                                </div>
                                                <div class="col-12">
                                                    <div class="border rounded p-3 bg-light">
                                                        <div class="form-check form-switch mb-2">
                                                            <input class="form-check-input" type="checkbox" id="lodgingLinkExpense">
                                                            <label class="form-check-label" for="lodgingLinkExpense">Link an expense (optional)</label>
                                                        </div>
                                                        <div class="row g-3 d-none" id="lodgingExpenseFields">
                                                            <div class="col-md-4">
                                                                <label class="form-label" for="lodgingExpensePayer">Payer</label>
                                                                <select class="form-select" id="lodgingExpensePayer">
                                                                    <option value="">Select payer</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-md-8 d-flex align-items-end">
                                                                <small class="text-muted">Split is equal across all participants for now.</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 d-flex justify-content-end gap-2 d-none">
                                                    <button class="btn btn-outline-secondary" type="button" id="lodgingCancel">Cancel</button>
                                                    <button class="btn btn-primary" type="submit">Add lodging</button>
                                                </div>
                                            </form>
                                            <div class="alert alert-warning d-none mt-3" id="lodgingReadOnly">
                                                You have read-only access in this group.
                                            </div>
                                            <div class="alert alert-danger d-none mt-3" id="lodgingError"></div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                                            <button class="btn btn-primary" type="submit" form="lodgingForm" id="lodgingSubmit">Add lodging</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-end mt-4">
                                <button class="btn btn-primary" type="button" id="openLodgingModal" data-bs-toggle="modal" data-bs-target="#lodgingModal">
                                    Add lodging
                                </button>
                            </div>
                            <div class="row g-2 mt-3 align-items-end" id="lodgingFilters">
                                <div class="col-md-4">
                                    <label class="form-label form-label-sm mb-1" for="filterLodgingCity">City</label>
                                    <input type="text" class="form-control form-control-sm" id="filterLodgingCity" placeholder="Filter by city...">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label form-label-sm mb-1" for="filterLodgingStatus">Status</label>
                                    <select class="form-select form-select-sm" id="filterLodgingStatus">
                                        <option value="">All</option>
                                        <option value="planned">Planned</option>
                                        <option value="paid">Paid</option>
                                        <option value="due">Due</option>
                                    </select>
                                </div>
                                <div class="col-md-5">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="clearLodgingFilters">Clear filters</button>
                                </div>
                            </div>
                            <div class="table-responsive mt-3">
                                <table class="table align-middle table-nowrap mb-0 table-mobile-cards">
                                    <thead class="table-light">
                                        <tr>
                                            <th class="sortable" data-sort="name" style="cursor:pointer">Property <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="city" style="cursor:pointer">Location <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="checkIn" style="cursor:pointer">Dates <span class="sort-icon"></span></th>
                                            <th>Rooms</th>
                                            <th class="sortable" data-sort="status" style="cursor:pointer">Status <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="cost" style="cursor:pointer">Cost <span class="sort-icon"></span></th>
                                            <th>Contact</th>
                                            <th class="text-end">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="lodgingList">
                                        <tr><td colspan="8" class="text-muted text-center">No lodgings yet.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-4" id="transports">
                        <div class="card-body">
                            <div class="alert alert-info d-flex align-items-start" role="alert">
                                <i class="mdi mdi-information-outline me-2"></i>
                                <div>
                                    MVP note: transports are logistical only. To record payments and splits, add an
                                    <a class="alert-link" href="#expenses">expense</a>.
                                </div>
                            </div>
                            <div class="modal fade" id="transportModal" tabindex="-1" aria-labelledby="transportModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-sm-down" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="transportModalLabel">Add transport</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <form id="transportForm" class="row g-3 needs-validation" novalidate>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="transportType">Type</label>
                                                    <input class="form-control" id="transportType" required>
                                                    <div class="invalid-feedback">Enter a transport type.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="transportProvider">Provider</label>
                                                    <input class="form-control" id="transportProvider">
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="transportLocator">Locator</label>
                                                    <input class="form-control" id="transportLocator">
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="transportStatus">Status</label>
                                                    <select class="form-select" id="transportStatus" required>
                                                        <option value="">Select a status</option>
                                                        <option value="planned">Planned</option>
                                                        <option value="paid">Paid</option>
                                                        <option value="due">Due</option>
                                                    </select>
                                                    <div class="invalid-feedback">Select a status.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="transportOrigin">Origin</label>
                                                    <input class="form-control" id="transportOrigin" required>
                                                    <div class="invalid-feedback">Enter an origin.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="transportDestination">Destination</label>
                                                    <input class="form-control" id="transportDestination" required>
                                                    <div class="invalid-feedback">Enter a destination.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="transportDepart">Departure</label>
                                                    <input class="form-control" id="transportDepart" type="datetime-local" required>
                                                    <div class="invalid-feedback">Select a departure time.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="transportArrive">Arrival</label>
                                                    <input class="form-control" id="transportArrive" type="datetime-local" required>
                                                    <div class="invalid-feedback">Select an arrival time.</div>
                                                </div>
                                                <div class="col-md-2">
                                                    <label class="form-label" for="transportAmount">Amount</label>
                                                    <input class="form-control" id="transportAmount" type="number" step="0.01" min="0.01" required>
                                                    <div class="invalid-feedback">Enter a valid amount.</div>
                                                </div>
                                                <div class="col-md-2">
                                                    <label class="form-label" for="transportCurrency">Currency</label>
                                                    <select class="form-select" id="transportCurrency" required>
                                                        <option value="">Select a currency</option>
                                                        <option value="USD">USD</option>
                                                        <option value="CAD">CAD</option>
                                                        <option value="BRL">BRL</option>
                                                    </select>
                                                    <div class="invalid-feedback">Select a currency.</div>
                                                </div>
                                                <div class="col-md-8">
                                                    <label class="form-label" for="transportNotes">Notes</label>
                                                    <textarea class="form-control" id="transportNotes" rows="2"></textarea>
                                                </div>
                                                <div class="col-12">
                                                    <div class="border rounded p-3 bg-light">
                                                        <div class="form-check form-switch mb-2">
                                                            <input class="form-check-input" type="checkbox" id="transportLinkExpense">
                                                            <label class="form-check-label" for="transportLinkExpense">Link an expense (optional)</label>
                                                        </div>
                                                        <div class="row g-3 d-none" id="transportExpenseFields">
                                                            <div class="col-md-4">
                                                                <label class="form-label" for="transportExpensePayer">Payer</label>
                                                                <select class="form-select" id="transportExpensePayer">
                                                                    <option value="">Select payer</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-md-8 d-flex align-items-end">
                                                                <small class="text-muted">Split is equal across all participants for now.</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 d-flex justify-content-end gap-2 d-none">
                                                    <button class="btn btn-outline-secondary" type="button" id="transportCancel">Cancel</button>
                                                    <button class="btn btn-primary" type="submit">Add transport</button>
                                                </div>
                                            </form>
                                            <div class="alert alert-warning d-none mt-3" id="transportReadOnly">
                                                You have read-only access in this group.
                                            </div>
                                            <div class="alert alert-danger d-none mt-3" id="transportError"></div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                                            <button class="btn btn-primary" type="submit" form="transportForm" id="transportSubmit">Add transport</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-end mt-4">
                                <button class="btn btn-primary" type="button" id="openTransportModal" data-bs-toggle="modal" data-bs-target="#transportModal">
                                    Add transport
                                </button>
                            </div>
                            <div class="row g-2 mt-3 align-items-end" id="transportFilters">
                                <div class="col-md-3">
                                    <label class="form-label form-label-sm mb-1" for="filterTransportStatus">Status</label>
                                    <select class="form-select form-select-sm" id="filterTransportStatus">
                                        <option value="">All</option>
                                        <option value="planned">Planned</option>
                                        <option value="paid">Paid</option>
                                        <option value="due">Due</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label form-label-sm mb-1" for="filterTransportProvider">Provider</label>
                                    <input type="text" class="form-control form-control-sm" id="filterTransportProvider" placeholder="Filter by provider...">
                                </div>
                                <div class="col-md-5">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="clearTransportFilters">Clear filters</button>
                                </div>
                            </div>
                            <div class="table-responsive mt-3">
                                <table class="table align-middle table-nowrap mb-0 table-mobile-cards">
                                    <thead class="table-light">
                                        <tr>
                                            <th class="sortable" data-sort="type" style="cursor:pointer">Type <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="origin" style="cursor:pointer">Route <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="departAt" style="cursor:pointer">Departure <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="arriveAt" style="cursor:pointer">Arrival <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="status" style="cursor:pointer">Status <span class="sort-icon"></span></th>
                                            <th class="sortable" data-sort="amount" style="cursor:pointer">Amount <span class="sort-icon"></span></th>
                                            <th>Provider/Locator</th>
                                            <th class="text-end">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="transportList">
                                        <tr><td colspan="8" class="text-muted text-center">No transports yet.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-4" id="tickets">
                        <div class="card-body">
                            <div class="alert alert-info d-flex align-items-start" role="alert">
                                <i class="mdi mdi-information-outline me-2"></i>
                                <div>
                                    MVP note: tickets are logistical only. To record payments and splits, add an
                                    <a class="alert-link" href="#expenses">expense</a>.
                                </div>
                            </div>
                            <div class="modal fade" id="ticketModal" tabindex="-1" aria-labelledby="ticketModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-sm-down" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="ticketModalLabel">Add ticket</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <form id="ticketForm" class="row g-3 needs-validation" novalidate>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="ticketType">Ticket type</label>
                                                    <input class="form-control" id="ticketType" required>
                                                    <div class="invalid-feedback">Enter a ticket type.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="ticketEventAt">Date/time</label>
                                                    <input class="form-control" id="ticketEventAt" type="datetime-local" required>
                                                    <div class="invalid-feedback">Select a date/time.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="ticketLocation">Location</label>
                                                    <input class="form-control" id="ticketLocation" required>
                                                    <div class="invalid-feedback">Enter a location.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="ticketStatus">Status</label>
                                                    <select class="form-select" id="ticketStatus" required>
                                                        <option value="">Select a status</option>
                                                        <option value="planned">Planned</option>
                                                        <option value="paid">Paid</option>
                                                        <option value="due">Due</option>
                                                    </select>
                                                    <div class="invalid-feedback">Select a status.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="ticketAmount">Amount</label>
                                                    <input class="form-control" id="ticketAmount" type="number" step="0.01" min="0.01" required>
                                                    <div class="invalid-feedback">Enter a valid amount.</div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="form-label" for="ticketCurrency">Currency</label>
                                                    <select class="form-select" id="ticketCurrency" required>
                                                        <option value="">Select a currency</option>
                                                        <option value="USD">USD</option>
                                                        <option value="CAD">CAD</option>
                                                        <option value="BRL">BRL</option>
                                                    </select>
                                                    <div class="invalid-feedback">Select a currency.</div>
                                                </div>
                                                <div class="col-md-6">
                                                    <label class="form-label" for="ticketParticipants">Participants</label>
                                                    <select class="form-select" id="ticketParticipants" multiple required></select>
                                                    <small class="text-muted">Select participants (Ctrl/Cmd for multiple).</small>
                                                </div>
                                                <div class="col-md-12">
                                                    <label class="form-label" for="ticketNotes">Notes</label>
                                                    <textarea class="form-control" id="ticketNotes" rows="2"></textarea>
                                                </div>
                                                <div class="col-12">
                                                    <div class="border rounded p-3 bg-light">
                                                        <div class="form-check form-switch mb-2">
                                                            <input class="form-check-input" type="checkbox" id="ticketLinkExpense">
                                                            <label class="form-check-label" for="ticketLinkExpense">Link an expense (optional)</label>
                                                        </div>
                                                        <div class="row g-3 d-none" id="ticketExpenseFields">
                                                            <div class="col-md-4">
                                                                <label class="form-label" for="ticketExpensePayer">Payer</label>
                                                                <select class="form-select" id="ticketExpensePayer">
                                                                    <option value="">Select payer</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-md-8 d-flex align-items-end">
                                                                <small class="text-muted">Split is equal across all participants for now.</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12 d-flex justify-content-end gap-2 d-none">
                                                    <button class="btn btn-outline-secondary" type="button" id="ticketCancel">Cancel</button>
                                                    <button class="btn btn-primary" type="submit">Add ticket</button>
                                                </div>
                                            </form>
                                            <div class="alert alert-warning d-none mt-3" id="ticketReadOnly">
                                                You have read-only access in this group.
                                            </div>
                                            <div class="alert alert-danger d-none mt-3" id="ticketError"></div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                                            <button class="btn btn-primary" type="submit" form="ticketForm" id="ticketSubmit">Add ticket</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-end mt-4">
                                <button class="btn btn-primary" type="button" id="openTicketModal" data-bs-toggle="modal" data-bs-target="#ticketModal">
                                    Add ticket
                                </button>
                            </div>
                            <div class="row g-2 mt-3 align-items-end" id="ticketFilters">
                                <div class="col-md-3">
                                    <label class="form-label form-label-sm mb-1" for="filterTicketType">Type</label>
                                    <input type="text" class="form-control form-control-sm" id="filterTicketType" placeholder="Filter by type...">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm mb-1" for="filterTicketStatus">Status</label>
                                    <select class="form-select form-select-sm" id="filterTicketStatus">
                                        <option value="">All</option>
                                        <option value="planned">Planned</option>
                                        <option value="paid">Paid</option>
                                        <option value="due">Due</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm mb-1" for="filterTicketDateFrom">Date from</label>
                                    <input type="date" class="form-control form-control-sm" id="filterTicketDateFrom">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm mb-1" for="filterTicketDateTo">Date to</label>
                                    <input type="date" class="form-control form-control-sm" id="filterTicketDateTo">
                                </div>
                                <div class="col-md-3">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="clearTicketFilters">Clear filters</button>
                                </div>
                            </div>
                            <div class="table-responsive mt-3">
                                    <table class="table align-middle table-nowrap mb-0 table-mobile-cards">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="sortable" data-sort="type" style="cursor:pointer">Type <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="eventAt" style="cursor:pointer">When <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="location" style="cursor:pointer">Location <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="status" style="cursor:pointer">Status <span class="sort-icon"></span></th>
                                                <th class="sortable" data-sort="amount" style="cursor:pointer">Amount <span class="sort-icon"></span></th>
                                                <th>Participants</th>
                                                <th class="text-end">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody id="ticketList">
                                            <tr><td colspan="7" class="text-muted text-center">No tickets yet.</td></tr>
                                        </tbody>
                                    </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-6">
                            <script>document.write(new Date().getFullYear())</script> (c) Orlando 2026
                        </div>
                        <div class="col-sm-6">
                            <div class="text-sm-end d-none d-sm-block">
                                Group travel management
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <div class="rightbar-overlay"></div>

    <div class="modal fade" id="avatarModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Update photo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <img id="avatarPreview" src="/assets/images/users/default-avatar.svg" class="rounded-circle avatar-lg" alt="Avatar preview">
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="avatarFile">Choose an image (JPG, PNG, WEBP)</label>
                        <input class="form-control" type="file" id="avatarFile" accept="image/png,image/jpeg,image/webp">
                        <div class="form-text">Max size: 2MB.</div>
                    </div>
                    <div class="text-danger small d-none" id="avatarError"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="avatarSaveBtn">Save</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="confirmDeleteMessage"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 11000;">
        <div id="successToast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body" id="successToastMessage"></div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
        <div id="errorToast" class="toast align-items-center text-white bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body" id="errorToastMessage"></div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>

    <script src="assets/libs/jquery/jquery.min.js"></script>
    <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/libs/metismenu/metisMenu.min.js"></script>
    <script src="assets/libs/simplebar/simplebar.min.js"></script>
    <script src="assets/libs/node-waves/waves.min.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="group.js" defer></script>
</body>
</html>
